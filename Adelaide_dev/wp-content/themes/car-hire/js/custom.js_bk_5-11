$(document).ready(function(){
	
	$('.date  .timing.minical_input').focusout(function() {


		var d = new Date();

		var month = d.getMonth()+1;
		var day = d.getDate();

		var output = ((''+day).length<2 ? '' : '') + day + '/' + ((''+month).length<2 ? '0' : '') + month+  '/' + d.getFullYear() ;
		

		var vlueFrmIp = $(this).val();
		

		var arr = []; 				//live time
		var arr = output.split('/');
		var arr2 = [];				 //user ip time
		var arr2 = vlueFrmIp.split('/');

			//Converting all the values to int

			var todayDate =  parseInt(arr[0]);
			var todayMnth =  parseInt(arr[1]);
			var todayYear =  parseInt(arr[2]);

			var userDate =  parseInt(arr2[0]);
			var userMnth =  parseInt(arr2[1]);
			var userYear =  parseInt(arr2[2]);


			if(todayYear <= userYear){
				//alert(arr[2]+ '==' +arr2[2]);
				$('.date  .timing.minical_input').css({'border':'1px solid gainsboro'});
				//alert(arr2[1]+ '==' +arr[1]);
				if( todayMnth <= userMnth){
					$('.date  .timing.minical_input').css({'border':'1px solid gainsboro'});
						if(todayMnth == userMnth){
							if(todayDate <= userDate){
								//alert('date Available');
								$('.date  .timing.minical_input').css({'border':'1px solid gainsboro'});
							}else {
								//alert('date Not Available');
								$('.date  .timing.minical_input').focus();
								$('.date  .timing.minical_input').val('Date is not Available');
								$('.date  .timing.minical_input').css({'border':'2px solid red'});
							}
						}else if(todayMnth < userMnth){
							if(todayDate > userDate || todayDate < userDate){
								//alert('both Date Available');
								$('.date  .timing.minical_input').css({'border':'1px solid gainsboro'});
							}
						}
					
				}else if(todayMnth > userMnth){
					$('.date  .timing.minical_input').focus();
					$('.date  .timing.minical_input').val('Date is not Available');
				   $('.date  .timing.minical_input').css({'border':'2px solid red'});
				}

			}else{
				$('.date  .timing.minical_input').val('date is not Available');
				 $('.date  .timing.minical_input').css({'border':'2px solid red'});
			}




			$('#timepicker').focusin(function () {
				var valOfDate = $('.date  .timing.minical_input').val();
				if(valOfDate == 'Date is not Available'){
					$('.date  .timing.minical_input').focus();
				}else{
					//donothing
				}
			});


		$('#minical_calendar_0 table td').bind('click',function(){
			$('.date  .timing.minical_input').focus();
		});
		$('#minical_calendar_0 .minical_prev').bind('click',function(){
			$('.date  .timing.minical_input').focus();
		});
		$('#minical_calendar_0 .minical_next').bind('click',function(){
			$('.date  .timing.minical_input').focus();
		});

	});


//popup
$('.submit-button').bind('click',showPopUp);
$('button.no').bind('click',closePopUp)
	console.log($('#header').height());
	$('.responsiveMenu').bind('click',function(){
		$('.menuForResponsive').stop().slideToggle();
	});
	$(window).scroll(function(){
		if($(this).width() > 769){
		var scrollPos = $(this).scrollTop();
		var logo = 100,
			logoWidth = logo - scrollPos/15;
		var menuPad = 30,
			menuWidth = menuPad - scrollPos/10;		
		$('.logo').find('img').css({'width':logoWidth+'%'});
		$('div.menu ul').css({'padding': menuWidth+'px 10px','margin-top':'10px'});
		$('.chat-icon').css({'padding': menuWidth+'px 0px','margin-top':'10px'});
		//$('#header').addClass('headerBorder');
		console.log($('#header').height());
		if($('#header').height() == 65){
			$('#header').addClass('headerBorder');
		}else{
			$('#header').removeClass('headerBorder');
		}
		var headerHeight = $('#header').height();
	$('.menuForResponsive').css({'top':headerHeight+'px'});
	}
	});
	var headerHeight = $('#header').height();
	$('.menuForResponsive').css({'top':headerHeight+'px'});
	
	
/* --------------------- banner slider ----------------------- */

//var slide = $("div.slider").children("ul");
//$('div').data('slide', slide);
//var images = $("div.slider").find("div.image");
////var currentPosition = 1;
//$('div').data('currentPosition', 1);
//var WidthOfImages = images.width();
//$('div').data('WidthOfImages', WidthOfImages);
//var totalImages = images.length;
//$('div').data('totalImages', totalImages);
//var totalWidth = totalImages * WidthOfImages;
//$('div').data('totalWidth', totalWidth);
//
//
//$("div.button").on("click", function() {
//	 var direction = $(this).data("dir");
//	sliderdivcontecnt(direction);
//	
//	});
//});
//setInterval(function () {
//        sliderdivcontecnt('next');
//    },18000);
//	
//function sliderdivcontecnt(direction){
//	var currentPosition = $('div').data('currentPosition');
//	var totalImages = $('div').data('totalImages');
//	var slide =  $('div').data('slide');
//	var WidthOfImages = $('div').data('WidthOfImages');
//	var totalWidth = $('div').data('totalWidth');
//	 
//if (direction == "next") {
//   currentPosition = currentPosition + 1;
//    if (currentPosition <= totalImages) {
//     slide.animate({
//      "margin-left": "-=" + WidthOfImages
//    });
//   } else {
//     currentPosition = 1;
//     slide.animate({
//     "margin-left": "0"
//    });
//   }
// } else if (direction == "prev") {
//    currentPosition = currentPosition - 1;
//	if (currentPosition > 0) {
//    slide.animate({
//       "margin-left": "+=" + WidthOfImages
//     });
//   } else if (currentPosition == 0) {
//     currentPosition = totalImages;
//     slide.animate({
//       "margin-left": "-" + (totalWidth - WidthOfImages)
//      });
//   }
//  }
//$('div').data('currentPosition', currentPosition);
//
//	}
/* ranit 20-10-16*/
// var arrayOfInputs = [];
// $('.full-form input').focusout(function() {		
// 		var id = $(this).attr('id');
// 		var val = $(this).val();

// 		arrayOfInputs.push({
// 			'id' : id,
// 			'Val' : val
// 		});
// 		for(i=0;i<=arrayOfInputs.length;i++){
// 			console.log(arrayOfInputs[i]);
// 		}
		
// 		//alert('value :'+ val +'and id is : '+id);
// 	});

	$('.full-form input:not(#timepicker)').focusin(checkValidation);

	$('.date  .timing.minical_input').focusin(checkDate);

	function checkDate(){
		$(this).focusout(function(){
			var val = $(this).val();
			//alert("val "+val);
			if(val == "Date is not Available"){
				//alert("Date is not Available");
				$(this).css({'border':'2px solid red'});
				$(this).focus();
			}else{
				$(this).css({'border':'1px solid gainsboro'});
				$(this).next().focus();
				$(this).focusOut();
			}
		})
	}

	function checkValidation(){
		$(this).focusout(function(){
			var id = $(this).attr('id');
			var val = $(this).val();
			if(val == ''){
				$(this).focus();
				$(this).css({'border':'2px solid red'});
				//alert("Please Enter Something !!");
			}else{
				$(this).css({'border':'1px solid gainsboro'});
				$(this).next().focus();
			}
			//alert(id);
			//var aa = $('div').data("isOpened");
			//console.log('0 or 1'+aa);
		})
	}



function showPopUp(){

	//alert("sdfsdf");
	//e.preventDefault();
	var firstName = $('.left-form #firstname').val();
	var email = $('.left-form #email').val();
	var date = $('.right-form #datepicker').val();
	var drop_off = $( "#drop_off option:selected" ).val();
	var pickup = $( "#pickup option:selected" ).val();
	var phn = $('.left-form #phn').val();
	var postCode1 = $('#post_code').val();
	var postCode2 = $('#post_code2').val();
	var timeP = $('.date  .timing.minical_input').val();

	// if(datee == 'Date is not Available'){
	// 	 $('.date  .timing.minical_input').css({'border':'2px solid red'});
	// 	}else{
	// 		 $('.date  .timing.minical_input').css({'border':'1px solid gainsboro'});
	// 	}
	// alert(drop_off);
	// var time = $('.right-form #timepicker').val();
	// alert(firstName);
	// if(phn == ''){
	// 	$('.left-form #phn').css({'border':'2px solid red'});
	// }else{
	// 	$('.left-form #firstname').css({'border':'1px solid gainsboro'});
	// }
	// if(postCode2 == ''){
	// 	$('#post_code2').css({'border':'2px solid red'});
	// }else{
	// 	$('#post_code2').css({'border':'1px solid gainsboro'});
	// }
	// if(postCode1 == ''){
	// 	$('#post_code').css({'border':'2px solid red'});
	// }else{
	// 	$('#post_code').css({'border':'1px solid gainsboro'});
	// }

	// if(firstName == ''){
	// 	$('.left-form #firstname').css({'border':'2px solid red'});
	// }else{
	// 	$('.left-form #firstname').css({'border':'1px solid gainsboro'});
	// 	//$('.popUpHold').fadeIn();
	// }
	// if(email == ''){
	// 	$('.left-form #email').css({'border':'2px solid red'});
	// }else{
	// 	$('.left-form #email').css({'border':'1px solid gainsboro'});
	// 	//$('.popUpHold').fadeIn();
	// }
	// if(date == ''){
	// 	$('.right-form #datepicker').css({'border':'2px solid red'});
	// }else{
	// 	$('.right-form #datepicker').css({'border':'1px solid gainsboro'});
	// 	//$('.popUpHold').fadeIn();
	// }
	// if(drop_off == 'Text'){
	// 	$('#drop_off select').css({'border':'2px solid red'});
	// }else{
	// 	$('#drop_off select').css({'border':'1px solid gainsboro'});
	// 	//$('.popUpHold').fadeIn();
	// }
	// if(pickup == 'Text'){
	// 	$('#pickup select').css({'border':'2px solid red'});
	// }else{
	// 	$('#pickup select').css({'border':'1px solid gainsboro'});
	// 	//$('.popUpHold').fadeIn();
	// }
	
	var ppp = $('#psterror').text();
	if(firstName != '' && email != '' && date != '' && drop_off != 'Text' && pickup != 'Text' && timeP != 'Date is not Available' ){
		
			$('.popUpHold').fadeIn();
		
	}
	
	
}
function closePopUp(){
	$('.popUpHold').fadeOut();
	$('#geocomplete').val(' ');
	$('#geocomplete1').val(' ');
}
});

$(function() {
	$('.timepicker').click(function(e) {
		$(this).next().hide();
	   $(this).hide();
	});
	$(".time-btn").click(function(){
    $(".timepicker_wrap").fadeOut();
});
});
