jQuery(document).ready(function(){

  $('.collapsible_panel ul li a').on('click', function(e){
  	  e.preventDefault();
  	 // alert('ffggf');
  	 var $currentItem= $('.collapsible_panel div.content');
  	 var $curentList=$('.collapsible_panel ul li a');
  	 $currentItem.slideUp();
     $curentList.removeClass('active');
  	 var $nextItem=$(this).siblings('.collapsible_panel div.content');

  	  
    if( $($nextItem).is(':visible')){
    	//alert('visible');
         $nextItem.slideUp(300);
         $(this).removeClass('active');
    }
     else{
        $nextItem.slideDown(300);
        //alert('Not visible');
        $(this).addClass('active');
     }
  	
     
  });



  // scroll top

  $('.uparrow a').hide();
  	$(window).scroll(function(){

  		var winScroll= $(this).scrollTop();
  		//console.log(winScroll);
  		if(winScroll>150){
  			$('.uparrow a').fadeIn();
  		}else{
  			$('.uparrow a').fadeOut();
  		}
    });
        

  	  $('.uparrow a').on('click', function(event){
        event.preventDefault();
        $('html,body').animate({scrollTop:0},800);
           return false;
  	  });

  //  Banner Down Arrow
  	  $(".down_arrow a.circle").click(function(e) {
  	  	e.preventDefault();
        $('html, body').animate({
          scrollTop: $("#introduction").offset().top
         }, 2000);
       });

// Introduction Down Arrow
  	  $('#introduction .content a.button').on('click', function(e){
         e.preventDefault();
         $('html,body').animate({
         	scrollTop:$("#product_highlight").offset().top
         },2000);
  	  });
	  
// Technical Details Down Arrow
  	  $('#tech_details a.button').on('click', function(e){
         e.preventDefault();
         $('html,body').animate({
         	scrollTop:$("#models").offset().top
         },2000);
  	  });


 // One page navigation smooth scroll
  	  $('nav a').on('click', function(e){
  	  	//alert('sfds');
         e.preventDefault();
         var divAtr = $(this).attr('href');
         var secOffset= $(divAtr).offset().top;
         //alert(secOffset);
         $('html,body').animate({
            scrollTop:secOffset
          },2000); 

  	  });

// one page active button

      var aChildren = $("nav li").children(); // find the a children of the list items
    var aArray = []; // create the empty aArray
    for (var i=0; i < aChildren.length; i++) {    
        var aChild = aChildren[i];
        var ahref = $(aChild).attr('href');
        aArray.push(ahref);
    } // this for loop fills the aArray with attribute href values
     console.log(aArray);
    $(window).scroll(function(){
        var windowPos = $(window).scrollTop(); // get the offset of the window from the top of page
        var windowHeight = $(window).height(); // get the height of the window
        var docHeight = $(document).height();

        for (var i=0; i < aArray.length; i++) {
            var theID = aArray[i];
            var divPos = $(theID).offset().top; // get the offset of the div from the top of page
            var divExactPos=divPos-20;
            var divHeight = $(theID).height(); // get the height of the div in question
            if (windowPos >= divExactPos && windowPos < (divExactPos + divHeight)) {
                $("a[href='" + theID + "']").addClass("active");
            } else {
                $("a[href='" + theID + "']").removeClass("active");
            }
        }

        if(windowPos + windowHeight == docHeight) {
            if (!$("nav li:last-child a").hasClass("active")) {
                var navActiveCurrent = $(".active").attr("href");
                $("a[href='" + navActiveCurrent + "']").removeClass("active");
                $("nav li:last-child a").addClass("active");
            }
        }
    });

    	


    //Products Highlights More Text
    $('#product_highlight a.more_btn').on('click', function(){
        // event.preventDefault();
         $('#product_highlight div.more').slideUp(300);
         var $moreDiv= $(this).siblings('#product_highlight div.more');
         if($($moreDiv).is(":visible")){
          $('#product_highlight div.more').slideUp(300);
          //alert('visible');
          console.log('visible');
        }else{

         $(this).siblings('div.more').slideDown(300);
        // alert('invisible');
        console.log('invisible');
        }
    });


    //tech details popup

    $('#tech_details .popbox a').hover( function(e){
       e.preventDefault();
       //alert('sacxas');
      $('#tech_details div.content').slideUp();
       var $popShow=$(this).parent().siblings('#tech_details div.content');
       $('#tech_details .popbox a').removeClass('rotate');
      // alert(popShow);
       console.log($popShow);
       if($($popShow).is(":visible")){
       // alert('show');
        $('div.content').slideUp();
        $(this).removeClass('rotate');
       }else{
       // alert('hide');
        $(this).parent().siblings('#tech_details div.content').slideDown();
        //$popShow.slideDown();
        $(this).addClass('rotate');
       }
       
       //$(this).parent().siblings('div.content').toggle();
    });

});	